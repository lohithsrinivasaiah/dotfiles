# Modern, Productive tmux.conf
# ----------------------------
# Sensible defaults, better navigation, and visually pleasing status bar

# Disable escape key delay
set -sg escape-time 0

# Set terminal to 256 colors and enable truecolor if supported
set -g default-terminal "screen-256color"
set-option -sa terminal-overrides ',xterm-256color:Tc'

# Start window and pane numbering at 1
set -g base-index 1
set -g pane-base-index 1
set -g renumber-windows on

# Disable window renaming
set -g allow-rename off

# Limit history size
set -g history-limit 10000

# Pane splitting bindings (| and -)
unbind %
bind | split-window -h
bind - split-window -v

# Enter copy mode with Escape key
unbind [
bind Escape copy-mode

# Window navigation with Alt/meta keys
bind -n M-h previous-window
bind -n M-l next-window

# Reload configuration
bind r source-file ~/.tmux.conf \; display-message "Reloaded ~/.tmux.conf"

# Display panes for 1.5 seconds
set -g display-panes-time 1500

# Mouse support (toggle with Ctrl-b m)
set -g mouse on
bind-key m \
    set -g mouse \;\
    display-message "Mouse mode: #{?mouse,on,off}"

# Improved status line
set-option -g status-justify left
set-option -g status-interval 2
set-option -g status-left '#[fg=colour15,bg=colour27,bold] #S #[fg=colour25,bg=colour235] '
set-option -g status-right '#[fg=colour245,bg=colour235]#[fg=colour15,bg=colour245] #(cd "#{pane_current_path}" && git rev-parse --abbrev-ref HEAD 2>/dev/null || echo "no-git") #[fg=colour235,bg=colour245]'

set-option -g status-left '#[fg=colour15,bg=colour27,bold] #S #[fg=colour27,bg=colour235] '
set-option -g status-right '#[fg=colour27,bg=colour235]#[fg=colour15,bg=colour27] #(cd "#{pane_current_path}" && git rev-parse --abbrev-ref HEAD 2>/dev/null || echo "no-git") #[fg=colour235,bg=colour27]'

# Visual tweaks for status bar
set -g status-bg colour235  # Dark gray background for status bar
set -g status-fg colour252  # Light gray foreground for text
setw -g window-status-current-format '#[fg=colour235,bg=colour27]#[fg=colour15,bg=colour27,bold] #I:#W #[fg=colour27,bg=colour235]'
setw -g window-status-format '#[fg=colour245,bg=colour235] #I:#W '
setw -g window-status-activity-style 'fg=colour208,bold'  # Orange for activity alerts
setw -g window-status-bell-style 'fg=colour276,bold'     # Red for bell alerts

# Pane border styling
set -g pane-border-style 'fg=colour238'         # Dim gray for inactive pane borders
set -g pane-active-border-style 'fg=colour27'   # Bright blue for active pane borders

# Allow faster pane resizing
bind -r < resize-pane -L 5
bind -r > resize-pane -R 5
bind -r + resize-pane -U 5
bind -r - resize-pane -D 5

# Vi mode in copy mode
setw -g mode-keys vi

# Clipboard integration (requires xclip or pbcopy on macOS)
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "xclip -in -selection clipboard"

# Optional: Start with last session (requires tmux-resurrect)
# set-option -g @resurrect-save 'S'
# set-option -g @resurrect-restore 'R'

